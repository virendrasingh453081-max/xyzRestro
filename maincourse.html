<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>XYZ RESTAURANT - Main Course</title>
<style>
  :root{--accent:#ff5a5f;--muted:#666;--card-bg:rgba(255,255,255,0.95);--radius:12px;--shadow:0 6px 20px rgba(2,6,23,0.12)}
  body{margin:0;font-family:Inter,system-ui,Arial;background:#fafafa;color:#111}
  body::before{content:"";position:fixed;inset:0;background:url('background.png') center/cover no-repeat;opacity:0.12;pointer-events:none;z-index:0}

  /* âœ… Responsive Header */
  header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;position:sticky;top:0;background:rgba(255,255,255,0.85);backdrop-filter:blur(6px);z-index:100;box-shadow:0 2px 8px rgba(0,0,0,0.05);}
  .brand{font-weight:800;font-size:18px;}
  nav{display:flex;gap:12px;}
  nav a{text-decoration:none;color:var(--muted);font-weight:700;font-size:15px;}
  .menu-toggle{display:none;font-size:22px;background:none;border:none;cursor:pointer;}
  @media(max-width:768px){
    nav{display:none;flex-direction:column;position:absolute;top:56px;right:10px;background:white;padding:10px;border-radius:10px;box-shadow:var(--shadow);}
    nav.active{display:flex;}
    .menu-toggle{display:block;}
  }

  /* Rest Same */
  .container{max-width:1100px;margin:18px auto;padding:0 16px;position:relative;z-index:2}
  .page-title{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px;margin-top:18px}
  .card{background:var(--card-bg);border-radius:var(--radius);padding:14px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px}
  .card h3{margin:0;font-size:18px}
  .desc{color:var(--muted);font-size:14px}
  .price{font-weight:800}
  .controls{display:flex;gap:8px;align-items:center;margin-top:auto}
  .qty{width:72px;display:flex;align-items:center;border:1px solid #eee;border-radius:10px;overflow:hidden}
  .qty button{flex:0 0 36px;border:0;background:transparent;cursor:pointer;padding:8px}
  .qty input{width:30px;border:0;text-align:center;font-weight:700}
  .add{background:var(--accent);color:#fff;padding:8px 10px;border-radius:10px;border:0;cursor:pointer;font-weight:800}
  .muted{color:var(--muted)}
  .cart-fab{position:fixed;right:18px;bottom:18px;background:linear-gradient(45deg,var(--accent),#ff7b7f);color:white;padding:12px 16px;border-radius:999px;display:flex;gap:10px;align-items:center;box-shadow:0 10px 30px rgba(0,0,0,0.18);z-index:60;cursor:pointer}
  #cartDrawer{display:none;position:fixed;right:0;bottom:0;top:0;width:420px;max-width:95%;background:white;box-shadow:-10px 0 40px rgba(0,0,0,0.2);z-index:80;padding:18px;overflow:auto}
</style>
</head>
<body>

<header>
  <div class="brand">XYZ RESTAURANT</div>
  <button class="menu-toggle" onclick="toggleMenu()">â˜°</button>
  <nav id="navMenu">
    <a href="index.html">Home</a>
    <a href="starters.html">Starters</a>
    <a href="maincourse.html">Main Course</a>
    <a href="desserts.html">Desserts</a>
    <a href="drinks.html">Drinks</a>
  </nav>
</header>

<main class="container">
  <div class="page-title">
    <div>
      <h1 style="margin:0">Main Course</h1>
      <div class="muted">Hearty, flavourful mains â€” vegetarian & non-vegetarian.</div>
    </div>
    <div>
      <button class="add" onclick="location.href='index.html'">Back to Home</button>
    </div>
  </div>
  <div class="grid" id="menuGrid"></div>
</main>

<div class="cart-fab" id="cartFab" onclick="openCart()">
  <div style="font-weight:800">Cart</div>
  <div class="count" id="cartCount">0</div>
  <div id="cartTotal" style="font-weight:700">â‚¹0</div>
</div>

<div id="cartDrawer">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <h3 style="margin:0">Your Cart</h3>
    <div><button onclick="closeCart()" style="border:0;background:transparent;cursor:pointer">âœ•</button></div>
  </div>
  <div id="cartItems" style="margin-top:12px"></div>
  <div style="margin-top:12px;border-top:1px solid #eee;padding-top:12px;display:flex;justify-content:space-between;align-items:center">
    <div>
      <div class="muted">Subtotal</div>
      <div id="drawerSubtotal" style="font-weight:800">â‚¹0</div>
    </div>
    <div>
      <button class="add" onclick="checkout()">Checkout (WhatsApp)</button>
    </div>
  </div>
</div>

<script>
/* Responsive Header JS */
function toggleMenu(){ document.getElementById('navMenu').classList.toggle('active'); }

/* Menu Items */
const menuItems=[
  {id:'m1',name:'Butter Chicken',price:360,desc:'Rich tomato & butter gravy with tender chicken'},
  {id:'m2',name:'Paneer Butter Masala',price:320,desc:'Creamy tomato gravy with soft paneer'},
  {id:'m3',name:'Dal Makhani',price:240,desc:'Slow-cooked black lentils'},
  {id:'m4',name:'Hyderabadi Biryani',price:380,desc:'Fragrant biryani with raita'}
];
const CART_KEY='xyz_cart';

/* Render Menu */
function renderMenu(){
  const grid=document.getElementById('menuGrid');
  grid.innerHTML='';
  menuItems.forEach(item=>{
    const card=document.createElement('div');
    card.className='card'; card.dataset.itemId=item.id;
    card.innerHTML=`
      <div style="display:flex;justify-content:space-between;align-items:flex-start">
        <div>
          <h3>${escapeHtml(item.name)}</h3>
          <div class="desc">${escapeHtml(item.desc)}</div>
        </div>
        <div class="price">â‚¹${item.price.toFixed(2)}</div>
      </div>
      <div class="controls">
        <div class="qty">
          <button onclick="changeLocalQty(this,-1)">âˆ’</button>
          <input type="number" value="1" min="1"/>
          <button onclick="changeLocalQty(this,1)">+</button>
        </div>
        <button class="add" onclick="addToCart('${item.id}')">Add to Cart</button>
      </div>`;
    grid.appendChild(card);
  });
}
function changeLocalQty(btn,delta){
  const input=btn.parentElement.querySelector('input');
  input.value=Math.max(1,parseInt(input.value||'1',10)+delta);
}

/* Cart */
function getCart(){try{return JSON.parse(localStorage.getItem(CART_KEY)||'[]');}catch(e){return[];}}
function saveCart(c){localStorage.setItem(CART_KEY,JSON.stringify(c));updateCartFab();}
function updateCartFab(){
  const c=getCart();let n=0,t=0;
  c.forEach(i=>{n+=i.qty;t+=i.qty*i.price});
  document.getElementById('cartCount').textContent=n;
  document.getElementById('cartTotal').textContent='â‚¹'+t.toFixed(2);
}
function addToCart(id){
  const i=menuItems.find(m=>m.id===id);if(!i)return;
  const card=[...document.querySelectorAll('#menuGrid .card')].find(c=>c.dataset.itemId===id);
  const q=Math.max(1,parseInt(card.querySelector('input').value||'1',10));
  const c=getCart();const e=c.find(x=>x.id===id);
  if(e)e.qty+=q;else c.push({id:i.id,name:i.name,price:i.price,qty:q});
  saveCart(c);card.querySelector('input').value=1;showToast('âœ… '+i.name+' added to cart');
}

/* Cart Drawer */
function openCart(){renderCart();document.getElementById('cartDrawer').style.display='block';}
function closeCart(){document.getElementById('cartDrawer').style.display='none';}
function renderCart(){
  const box=document.getElementById('cartItems');const c=getCart();
  box.innerHTML='';
  if(c.length===0){box.innerHTML='<div class="muted">Cart is empty</div>';document.getElementById('drawerSubtotal').textContent='â‚¹0';return;}
  c.forEach((it,idx)=>{
    const el=document.createElement('div');
    el.style.display='flex';el.style.justifyContent='space-between';el.style.alignItems='center';el.style.padding='8px 0';el.style.borderBottom='1px solid #f6f6f6';
    el.innerHTML=`
      <div>
        <div style="font-weight:700">${escapeHtml(it.name)}</div>
        <div class="muted">â‚¹${it.price.toFixed(2)} Ã— ${it.qty} = â‚¹${(it.price*it.qty).toFixed(2)}</div>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <button onclick="changeQty(${idx},-1)" style="padding:6px;border-radius:8px;border:1px solid #eee;background:#fff;cursor:pointer">âˆ’</button>
        <div style="min-width:28px;text-align:center">${it.qty}</div>
        <button onclick="changeQty(${idx},1)" style="padding:6px;border-radius:8px;border:1px solid #eee;background:#fff;cursor:pointer">+</button>
        <button onclick="removeFromCart(${idx})" style="margin-left:8px;border:0;background:transparent;color:#ff5a5f;cursor:pointer">Remove</button>
      </div>`;
    box.appendChild(el);
  });
  const subtotal=c.reduce((s,i)=>s+i.qty*i.price,0);
  document.getElementById('drawerSubtotal').textContent='â‚¹'+subtotal.toFixed(2);
}
function changeQty(i,d){const c=getCart();if(!c[i])return;c[i].qty=Math.max(0,c[i].qty+d);if(c[i].qty===0)c.splice(i,1);saveCart(c);renderCart();}
function removeFromCart(i){const c=getCart();c.splice(i,1);saveCart(c);renderCart();}

/* Checkout */
function checkout(){
  const c=getCart();if(c.length===0){showToast('ðŸ›’ Cart is empty');return;}
  const lines=['Order from XYZ RESTAURANT','Table: X','----'];let s=0;
  c.forEach(i=>{lines.push(`${i.name} x ${i.qty} - â‚¹${(i.price*i.qty).toFixed(2)}`);s+=i.qty*i.price;});
  lines.push('----','Subtotal: â‚¹'+s.toFixed(2),'(Amount displayed WITHOUT GST)');
  const msg=encodeURIComponent(lines.join('\n'));
  const wa='91XXXXXXXXXX';
  window.open('https://wa.me/'+wa+'?text='+msg,'_blank');
}

/* Toast */
function showToast(m){
  const t=document.createElement('div');
  t.textContent=m;t.style.position='fixed';t.style.bottom='20px';t.style.right='20px';
  t.style.background='#333';t.style.color='#fff';t.style.padding='10px 18px';
  t.style.borderRadius='8px';t.style.opacity='0';t.style.transition='all .4s';
  document.body.appendChild(t);setTimeout(()=>t.style.opacity='1',50);
  setTimeout(()=>{t.style.opacity='0';setTimeout(()=>t.remove(),400)},2000);
}

function escapeHtml(s){return String(s).replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m]);}
renderMenu();updateCartFab();
</script>
</body>
</html>
